{"ast":null,"code":"/*\r\n Agent class.  An agent is a separate individual that communicates via messages to other agents.\r\n\r\n It contains a 3D representation implemented via three.js classes\r\n It contains a 2D parameter setup representation implemented via React components\r\n */\nexport class Agent {\n  constructor(context, radio, id, world, size, x, y, z, rotx = 0, roty = 0, rotz = 0) {\n    this.marked = false;\n    this.THREE = context;\n    this.radio = radio;\n    this.id = id;\n    this.size = size;\n    this.world = world;\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.rotx = rotx;\n    this.roty = roty;\n    this.rotz = rotz;\n    this.state = {};\n    this.createMesh();\n    this.neighbors = []; // Validate to catch runtime bugs\n\n    if (typeof id === \"undefined\") {\n      throw \"Agent.id must be set\";\n    }\n  }\n\n  setMarked(val) {\n    console.log(\"Mark me: \" + this.id + \" val: \" + val);\n    this.marked = val;\n    this.group.remove(this.group, this.group.children);\n    console.log(\"group: \" + this.group.children);\n    this.group.add(this.mesh);\n    if (!this.marked) return;\n    let geometry = new this.THREE.SphereGeometry(this.size * 1.3, 24, 24, 0, Math.PI * 2, 0, Math.PI / 2);\n    let material = new this.THREE.MeshBasicMaterial({\n      color: 0xFF0000\n    });\n    let marker = new this.THREE.Mesh(geometry, material);\n    marker.position.copy(new this.THREE.Vector3(this.x, this.y, this.z - this.size));\n    marker.rotation.x = this.rotx;\n    marker.rotation.y = this.roty;\n    marker.rotation.z = this.rotz;\n    this.group.add(marker);\n  }\n\n  getMarked() {\n    return this.marked;\n  } // State should always be a single map for easier serialization\n\n\n  getState() {\n    return this.state;\n  }\n\n  getPosition() {\n    return new this.THREE.Vector3(this.x, this.y, this.z);\n  }\n\n  createMesh() {\n    this.geometry = new this.THREE.SphereGeometry(this.size, 24, 24, 0, Math.PI * 2, 0, Math.PI / 2);\n    this.material = new this.THREE.MeshBasicMaterial({\n      color: 0xFFFFFF\n    });\n    this.mesh = new this.THREE.Mesh(this.geometry, this.material);\n    this.mesh.position.copy(new this.THREE.Vector3(this.x, this.y, this.z));\n    this.mesh.rotation.x = this.rotx;\n    this.mesh.rotation.y = this.roty;\n    this.mesh.rotation.z = this.rotz;\n    this.group = new this.THREE.Group();\n    this.group.add(this.mesh);\n  } // Called only once.  You may modify it but cannot reallocate it.\n\n\n  getMesh() {\n    return this.group;\n  } // Simulation methods\n\n\n  loop() {}\n\n  setNeighbors(val) {\n    this.neighbors = [...val];\n  }\n\n  getNeighbors() {\n    return this.neighbors;\n  }\n\n  addNeighbor(id) {\n    this.neighbors.push(id);\n  }\n\n  removeNeighbor(id) {\n    let index = this.neighbors.indexOf(id);\n    if (index !== -1) this.neighbors.splice(index, 1);\n  }\n\n  receiveMessage(msg) {} // simulator.sendMessage(id,msg) - Sends a message to another Agent.  Has a variable delay\n\n\n}","map":{"version":3,"sources":["C:/cygwin64/home/giles/projs/personal/getalife/prototype/src/Agent.js"],"names":["Agent","constructor","context","radio","id","world","size","x","y","z","rotx","roty","rotz","marked","THREE","state","createMesh","neighbors","setMarked","val","console","log","group","remove","children","add","mesh","geometry","SphereGeometry","Math","PI","material","MeshBasicMaterial","color","marker","Mesh","position","copy","Vector3","rotation","getMarked","getState","getPosition","Group","getMesh","loop","setNeighbors","getNeighbors","addNeighbor","push","removeNeighbor","index","indexOf","splice","receiveMessage","msg"],"mappings":"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","sourcesContent":["/*\r\n Agent class.  An agent is a separate individual that communicates via messages to other agents.\r\n\r\n It contains a 3D representation implemented via three.js classes\r\n It contains a 2D parameter setup representation implemented via React components\r\n */\r\nexport class Agent {\r\n  marked = false;\r\n\r\n  constructor(context,radio,id,world,size,x,y,z,rotx=0,roty=0,rotz=0) {\r\n    this.THREE = context;\r\n    this.radio = radio;\r\n    this.id = id;\r\n    this.size = size;\r\n    this.world = world;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n    this.rotx = rotx;\r\n    this.roty = roty;\r\n    this.rotz = rotz;\r\n    this.state = {};\r\n\r\n    this.createMesh();\r\n    this.neighbors = [];\r\n\r\n    // Validate to catch runtime bugs\r\n    if (typeof id === \"undefined\") {\r\n      throw \"Agent.id must be set\";\r\n    }\r\n  }\r\n\r\n  setMarked(val) {\r\n    console.log(\"Mark me: \" + this.id + \" val: \" + val);\r\n    this.marked = val;\r\n\r\n    this.group.remove(this.group,this.group.children);\r\n    console.log(\"group: \" + this.group.children);\r\n    this.group.add(this.mesh);\r\n\r\n    if (!this.marked) return;\r\n\r\n    let geometry = new this.THREE.SphereGeometry(this.size*1.3, 24, 24,0,Math.PI*2,0,Math.PI/2);\r\n    let material = new this.THREE.MeshBasicMaterial({\r\n      color: 0xFF0000,\r\n    });\r\n    let marker = new this.THREE.Mesh(geometry, material);\r\n    marker.position.copy(new this.THREE.Vector3(this.x,this.y,this.z-this.size));\r\n    marker.rotation.x = this.rotx;\r\n    marker.rotation.y = this.roty;\r\n    marker.rotation.z = this.rotz;\r\n\r\n    this.group.add(marker);\r\n  }\r\n\r\n  getMarked() {\r\n    return this.marked;\r\n  }\r\n\r\n  // State should always be a single map for easier serialization\r\n  getState() {\r\n    return this.state;\r\n  }\r\n\r\n  getPosition() {\r\n    return new this.THREE.Vector3(this.x,this.y,this.z);\r\n  }\r\n\r\n  createMesh() {\r\n    this.geometry = new this.THREE.SphereGeometry(this.size, 24, 24,0,Math.PI*2,0,Math.PI/2);\r\n    this.material = new this.THREE.MeshBasicMaterial({\r\n      color: 0xFFFFFF,\r\n    });\r\n    this.mesh = new this.THREE.Mesh(this.geometry, this.material);\r\n    this.mesh.position.copy(new this.THREE.Vector3(this.x,this.y,this.z));\r\n    this.mesh.rotation.x = this.rotx;\r\n    this.mesh.rotation.y = this.roty;\r\n    this.mesh.rotation.z = this.rotz;\r\n\r\n    this.group = new this.THREE.Group();\r\n    this.group.add(this.mesh);\r\n  }\r\n\r\n  // Called only once.  You may modify it but cannot reallocate it.\r\n  getMesh() {\r\n    return this.group;\r\n  }\r\n\r\n  // Simulation methods\r\n  loop() {\r\n\r\n  }\r\n\r\n  setNeighbors(val) {\r\n    this.neighbors = [...val];\r\n  }\r\n\r\n  getNeighbors() {\r\n    return this.neighbors;\r\n  }\r\n\r\n  addNeighbor(id) {\r\n    this.neighbors.push(id);\r\n  }\r\n\r\n  removeNeighbor(id) {\r\n    let index = this.neighbors.indexOf(id);\r\n    if (index !== -1) this.neighbors.splice(index,1);\r\n  }\r\n\r\n  receiveMessage(msg) {\r\n  }\r\n\r\n  // simulator.sendMessage(id,msg) - Sends a message to another Agent.  Has a variable delay\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\cygwin64\\\\home\\\\giles\\\\projs\\\\personal\\\\getalife\\\\prototype\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { Agent } from \"./Agent\";\nimport { World } from \"./World\";\nconst style = {\n  height: 512 // we can control scene size by setting container dimensions\n\n};\nlet delta = 0;\nlet clock = new THREE.Clock();\nlet interval = 1 / 30;\nlet world = new World();\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.sceneSetup = () => {\n      // get container dimensions and use them for scene sizing\n      const width = this.el.clientWidth;\n      const height = this.el.clientHeight;\n      this.scene = new THREE.Scene();\n      this.camera = new THREE.PerspectiveCamera(75, // fov = field of view\n      width / height, // aspect ratio\n      0.1, // near plane\n      1000.0 // far plane\n      );\n      this.camera.position.z = 5; // is used here to set some distance from a cube that is located at z = 0\n      // OrbitControls allow a camera to orbit around the object\n      // https://threejs.org/docs/#examples/controls/OrbitControls\n\n      this.controls = new OrbitControls(this.camera, this.el);\n      this.renderer = new THREE.WebGLRenderer();\n      this.renderer.setSize(width, height);\n      this.el.appendChild(this.renderer.domElement); // mount using React ref\n    };\n\n    this.addCustomSceneObjects = () => {\n      const agent1 = new Agent(THREE, world, 0.1, 2, 0, 0, 0, 0, Math.PI / 2);\n      const agent2 = new Agent(THREE, world, 0.5, -2, 0, 0);\n      this.agents = [agent1, agent2];\n\n      for (let n = 0; n < this.agents.length; n++) {\n        this.scene.add(this.agents[n].getMesh());\n      }\n\n      const lights = [];\n      lights[0] = new THREE.PointLight(0xffffff, 1, 0);\n      lights[1] = new THREE.PointLight(0xffffff, 1, 0);\n      lights[2] = new THREE.PointLight(0xffffff, 1, 0);\n      lights[0].position.set(0, 200, 0);\n      lights[1].position.set(100, 200, 100);\n      lights[2].position.set(-100, -200, -100); //this.scene.add(lights[0]);\n      //this.scene.add(lights[1]);\n      //this.scene.add(lights[2]);\n    };\n\n    this.startAnimationLoop = () => {\n      this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n      delta += clock.getDelta();\n\n      if (delta < interval) {\n        return;\n      }\n\n      for (let n = 0; n < this.agents.length; n++) {\n        this.agents[n].updateRender();\n      }\n\n      this.renderer.render(this.scene, this.camera);\n      delta = delta % interval;\n    };\n\n    this.handleWindowResize = () => {\n      const width = this.el.clientWidth;\n      const height = this.el.clientHeight;\n      this.renderer.setSize(width, height);\n      this.camera.aspect = width / height; // Note that after making changes to most of camera properties you have to call\n      // .updateProjectionMatrix for the changes to take effect.\n\n      this.camera.updateProjectionMatrix();\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"world: \" + World.getTemperature(world.getState(), 0, 0, 0));\n    this.sceneSetup();\n    this.addCustomSceneObjects();\n    this.startAnimationLoop();\n    window.addEventListener(\"resize\", this.handleWindowResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    window.cancelAnimationFrame(this.requestID);\n    this.controls.dispose();\n  } // Standard scene setup in Three.js. Check \"Creating a scene\" manual for more information\n  // https://threejs.org/docs/#manual/en/introduction/Creating-a-scene\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: style,\n      ref: ref => this.el = ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 12\n      }\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/cygwin64/home/giles/projs/personal/getalife/prototype/src/App.js"],"names":["React","Component","THREE","OrbitControls","Agent","World","style","height","delta","clock","Clock","interval","world","App","sceneSetup","width","el","clientWidth","clientHeight","scene","Scene","camera","PerspectiveCamera","position","z","controls","renderer","WebGLRenderer","setSize","appendChild","domElement","addCustomSceneObjects","agent1","Math","PI","agent2","agents","n","length","add","getMesh","lights","PointLight","set","startAnimationLoop","requestID","window","requestAnimationFrame","getDelta","updateRender","render","handleWindowResize","aspect","updateProjectionMatrix","componentDidMount","console","log","getTemperature","getState","addEventListener","componentWillUnmount","removeEventListener","cancelAnimationFrame","dispose","ref"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { Agent } from \"./Agent\"\nimport { World } from \"./World\"\n\n\nconst style = {\n  height: 512 // we can control scene size by setting container dimensions\n};\n\nlet delta = 0;\nlet clock = new THREE.Clock();\nlet interval = 1 / 30;\nlet world = new World();\n\nclass App extends Component {\n\n  componentDidMount() {\n    console.log(\"world: \" + World.getTemperature(world.getState(),0,0,0));\n\n    this.sceneSetup();\n    this.addCustomSceneObjects();\n    this.startAnimationLoop();\n    window.addEventListener(\"resize\", this.handleWindowResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    window.cancelAnimationFrame(this.requestID);\n    this.controls.dispose();\n  }\n\n  // Standard scene setup in Three.js. Check \"Creating a scene\" manual for more information\n  // https://threejs.org/docs/#manual/en/introduction/Creating-a-scene\n  sceneSetup = () => {\n    // get container dimensions and use them for scene sizing\n    const width = this.el.clientWidth;\n    const height = this.el.clientHeight;\n\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera(\n      75, // fov = field of view\n      width / height, // aspect ratio\n      0.1, // near plane\n      1000.0 // far plane\n    );\n    this.camera.position.z = 5; // is used here to set some distance from a cube that is located at z = 0\n    // OrbitControls allow a camera to orbit around the object\n    // https://threejs.org/docs/#examples/controls/OrbitControls\n\n    this.controls = new OrbitControls(this.camera, this.el);\n    this.renderer = new THREE.WebGLRenderer();\n    this.renderer.setSize(width, height);\n    this.el.appendChild(this.renderer.domElement); // mount using React ref\n\n  };\n\n  // Here should come custom code.\n  // Code below is taken from Three.js BoxGeometry example\n  // https://threejs.org/docs/#api/en/geometries/BoxGeometry\n  addCustomSceneObjects = () => {\n    const agent1 = new Agent(THREE,world,0.1,2,0,0,0,0,Math.PI/2);\n    const agent2 = new Agent(THREE,world,0.5,-2,0,0);\n    this.agents = [agent1,agent2];\n\n    for(let n=0; n < this.agents.length; n++) {\n      this.scene.add(this.agents[n].getMesh());\n    }\n\n    const lights = [];\n    lights[0] = new THREE.PointLight(0xffffff, 1, 0);\n    lights[1] = new THREE.PointLight(0xffffff, 1, 0);\n    lights[2] = new THREE.PointLight(0xffffff, 1, 0);\n\n    lights[0].position.set(0, 200, 0);\n    lights[1].position.set(100, 200, 100);\n    lights[2].position.set(-100, -200, -100);\n\n    //this.scene.add(lights[0]);\n    //this.scene.add(lights[1]);\n    //this.scene.add(lights[2]);\n  };\n\n  startAnimationLoop = () => {\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n\n    delta += clock.getDelta();\n    if (delta < interval) {\n      return;\n    }\n\n    for(let n=0; n < this.agents.length; n++) {\n      this.agents[n].updateRender();\n    }\n\n    this.renderer.render(this.scene, this.camera);\n    delta = delta % interval;\n  };\n\n  handleWindowResize = () => {\n    const width = this.el.clientWidth;\n    const height = this.el.clientHeight;\n\n    this.renderer.setSize(width, height);\n    this.camera.aspect = width / height;\n\n    // Note that after making changes to most of camera properties you have to call\n    // .updateProjectionMatrix for the changes to take effect.\n    this.camera.updateProjectionMatrix();\n  };\n\n  render() {\n    return <div style={style} ref={ref => (this.el = ref)} />;\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
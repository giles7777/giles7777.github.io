{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('three')) : typeof define === 'function' && define.amd ? define(['three'], factory) : global.orbitControls = factory(global.three);\n})(this, function (three) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n\n\n  var OrbitControls = /*#__PURE__*/function (_EventDispatcher) {\n    _inherits(OrbitControls, _EventDispatcher);\n\n    function OrbitControls(object, domElement) {\n      var _this;\n\n      _classCallCheck(this, OrbitControls);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(OrbitControls).call(this));\n      _this.object = object;\n      _this.domElement = domElement !== undefined ? domElement : document; // Set to false to disable this control\n\n      _this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n      _this.target = new three.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n      _this.minDistance = 0;\n      _this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n      _this.minZoom = 0;\n      _this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n      // Range is 0 to Math.PI radians.\n\n      _this.minPolarAngle = 0; // radians\n\n      _this.maxPolarAngle = Math.PI; // radians\n      // How far you can orbit horizontally, upper and lower limits.\n      // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\n      _this.minAzimuthAngle = -Infinity; // radians\n\n      _this.maxAzimuthAngle = Infinity; // radians\n      // Set to true to enable damping (inertia)\n      // If damping is enabled, you must call controls.update() in your animation loop\n\n      _this.enableDamping = false;\n      _this.dampingFactor = 0.25; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n      // Set to false to disable zooming\n\n      _this.enableZoom = true;\n      _this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n      _this.enableRotate = true;\n      _this.rotateSpeed = 1.0; // Set to false to disable panning\n\n      _this.enablePan = true;\n      _this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n      // Set to true to automatically rotate around the target\n      // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n      _this.autoRotate = false;\n      _this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n      // Set to false to disable use of the keys\n\n      _this.enableKeys = true; // The four arrow keys\n\n      _this.keys = {\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        BOTTOM: 40\n      }; // Mouse buttons\n\n      _this.mouseButtons = {\n        ORBIT: three.MOUSE.LEFT,\n        ZOOM: three.MOUSE.MIDDLE,\n        PAN: three.MOUSE.RIGHT\n      }; // for reset\n\n      _this.target0 = _this.target.clone();\n      _this.position0 = _this.object.position.clone();\n      _this.zoom0 = _this.object.zoom; //\n      // public methods\n      //\n\n      _this.getPolarAngle = function () {\n        return spherical.phi;\n      };\n\n      _this.getAzimuthalAngle = function () {\n        return spherical.theta;\n      };\n\n      _this.reset = function () {\n        scope.target.copy(scope.target0);\n        scope.object.position.copy(scope.position0);\n        scope.object.zoom = scope.zoom0;\n        scope.object.updateProjectionMatrix();\n        scope.dispatchEvent(changeEvent);\n        scope.update();\n        state = STATE.NONE;\n      }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n      _this.update = function () {\n        var offset = new three.Vector3(); // so camera.up is the orbit axis\n\n        var quat = new three.Quaternion().setFromUnitVectors(object.up, new three.Vector3(0, 1, 0));\n        var quatInverse = quat.clone().inverse();\n        var lastPosition = new three.Vector3();\n        var lastQuaternion = new three.Quaternion();\n        return function update() {\n          var position = scope.object.position;\n          offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n          offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n          spherical.setFromVector3(offset);\n\n          if (scope.autoRotate && state === STATE.NONE) {\n            rotateLeft(getAutoRotationAngle());\n          }\n\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi; // restrict theta to be between desired limits\n\n          spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\n\n          spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n          spherical.makeSafe();\n          spherical.radius *= scale; // restrict radius to be between desired limits\n\n          spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n          scope.target.add(panOffset);\n          offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n          offset.applyQuaternion(quatInverse);\n          position.copy(scope.target).add(offset);\n          scope.object.lookAt(scope.target);\n\n          if (scope.enableDamping === true) {\n            sphericalDelta.theta *= 1 - scope.dampingFactor;\n            sphericalDelta.phi *= 1 - scope.dampingFactor;\n          } else {\n            sphericalDelta.set(0, 0, 0);\n          }\n\n          scale = 1;\n          panOffset.set(0, 0, 0); // update condition is:\n          // min(camera displacement, camera rotation in radians)^2 > EPS\n          // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n          if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n            scope.dispatchEvent(changeEvent);\n            lastPosition.copy(scope.object.position);\n            lastQuaternion.copy(scope.object.quaternion);\n            zoomChanged = false;\n            return true;\n          }\n\n          return false;\n        };\n      }();\n\n      _this.dispose = function () {\n        scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n        scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n        scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n        scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n        scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n        scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n        document.removeEventListener('mousemove', onMouseMove, false);\n        document.removeEventListener('mouseup', onMouseUp, false);\n        window.removeEventListener('keydown', onKeyDown, false); // scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n      }; //\n      // internals\n      //\n\n\n      var scope = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var changeEvent = {\n        type: 'change'\n      };\n      var startEvent = {\n        type: 'start'\n      };\n      var endEvent = {\n        type: 'end'\n      };\n      var STATE = {\n        NONE: -1,\n        ROTATE: 0,\n        DOLLY: 1,\n        PAN: 2,\n        TOUCH_ROTATE: 3,\n        TOUCH_DOLLY: 4,\n        TOUCH_PAN: 5\n      };\n      var state = STATE.NONE;\n      var EPS = 0.000001; // current position in spherical coordinates\n\n      var spherical = new three.Spherical();\n      var sphericalDelta = new three.Spherical();\n      var scale = 1;\n      var panOffset = new three.Vector3();\n      var zoomChanged = false;\n      var rotateStart = new three.Vector2();\n      var rotateEnd = new three.Vector2();\n      var rotateDelta = new three.Vector2();\n      var panStart = new three.Vector2();\n      var panEnd = new three.Vector2();\n      var panDelta = new three.Vector2();\n      var dollyStart = new three.Vector2();\n      var dollyEnd = new three.Vector2();\n      var dollyDelta = new three.Vector2();\n\n      function getAutoRotationAngle() {\n        return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n      }\n\n      function getZoomScale() {\n        return Math.pow(0.95, scope.zoomSpeed);\n      }\n\n      function rotateLeft(angle) {\n        sphericalDelta.theta -= angle;\n      }\n\n      function rotateUp(angle) {\n        sphericalDelta.phi -= angle;\n      }\n\n      var panLeft = function () {\n        var v = new three.Vector3();\n        return function panLeft(distance, objectMatrix) {\n          v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n          v.multiplyScalar(-distance);\n          panOffset.add(v);\n        };\n      }();\n\n      var panUp = function () {\n        var v = new three.Vector3();\n        return function panUp(distance, objectMatrix) {\n          v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n\n          v.multiplyScalar(distance);\n          panOffset.add(v);\n        };\n      }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n      var pan = function () {\n        var offset = new three.Vector3();\n        return function pan(deltaX, deltaY) {\n          var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n          if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n            // perspective\n            var position = scope.object.position;\n            offset.copy(position).sub(scope.target);\n            var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n            targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we actually don't use screenWidth, since perspective camera is fixed to screen height\n\n            panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n            panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n          } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n            // orthographic\n            panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n            panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n          } else {\n            // camera neither orthographic nor perspective\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n            scope.enablePan = false;\n          }\n        };\n      }();\n\n      function dollyIn(dollyScale) {\n        if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n          scale /= dollyScale;\n        } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n          scope.object.updateProjectionMatrix();\n          zoomChanged = true;\n        } else {\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n          scope.enableZoom = false;\n        }\n      }\n\n      function dollyOut(dollyScale) {\n        if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n          scale *= dollyScale;\n        } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n          scope.object.updateProjectionMatrix();\n          zoomChanged = true;\n        } else {\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n          scope.enableZoom = false;\n        }\n      } //\n      // event callbacks - update the object state\n      //\n\n\n      function handleMouseDownRotate(event) {\n        // console.log( 'handleMouseDownRotate' );\n        rotateStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseDownDolly(event) {\n        // console.log( 'handleMouseDownDolly' );\n        dollyStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseDownPan(event) {\n        // console.log( 'handleMouseDownPan' );\n        panStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseMoveRotate(event) {\n        // console.log( 'handleMouseMoveRotate' );\n        rotateEnd.set(event.clientX, event.clientY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement; // rotating across whole screen goes 360 degrees around\n\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed); // rotating up and down along whole screen attempts to go 360, but limited to 180\n\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n        rotateStart.copy(rotateEnd);\n        scope.update();\n      }\n\n      function handleMouseMoveDolly(event) {\n        // console.log( 'handleMouseMoveDolly' );\n        dollyEnd.set(event.clientX, event.clientY);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          dollyIn(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          dollyOut(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n        scope.update();\n      }\n\n      function handleMouseMovePan(event) {\n        // console.log( 'handleMouseMovePan' );\n        panEnd.set(event.clientX, event.clientY);\n        panDelta.subVectors(panEnd, panStart);\n        pan(panDelta.x, panDelta.y);\n        panStart.copy(panEnd);\n        scope.update();\n      }\n\n      function handleMouseWheel(event) {\n        // console.log( 'handleMouseWheel' );\n        if (event.deltaY < 0) {\n          dollyOut(getZoomScale());\n        } else if (event.deltaY > 0) {\n          dollyIn(getZoomScale());\n        }\n\n        scope.update();\n      }\n\n      function handleKeyDown(event) {\n        // console.log( 'handleKeyDown' );\n        switch (event.keyCode) {\n          case scope.keys.UP:\n            pan(0, scope.keyPanSpeed);\n            scope.update();\n            break;\n\n          case scope.keys.BOTTOM:\n            pan(0, -scope.keyPanSpeed);\n            scope.update();\n            break;\n\n          case scope.keys.LEFT:\n            pan(scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n\n          case scope.keys.RIGHT:\n            pan(-scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n        }\n      }\n\n      function handleTouchStartRotate(event) {\n        // console.log( 'handleTouchStartRotate' );\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      }\n\n      function handleTouchStartDolly(event) {\n        // console.log( 'handleTouchStartDolly' );\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        dollyStart.set(0, distance);\n      }\n\n      function handleTouchStartPan(event) {\n        // console.log( 'handleTouchStartPan' );\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      }\n\n      function handleTouchMoveRotate(event) {\n        // console.log( 'handleTouchMoveRotate' );\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement; // rotating across whole screen goes 360 degrees around\n\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed); // rotating up and down along whole screen attempts to go 360, but limited to 180\n\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n        rotateStart.copy(rotateEnd);\n        scope.update();\n      }\n\n      function handleTouchMoveDolly(event) {\n        // console.log( 'handleTouchMoveDolly' );\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        dollyEnd.set(0, distance);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          dollyOut(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          dollyIn(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n        scope.update();\n      }\n\n      function handleTouchMovePan(event) {\n        // console.log( 'handleTouchMovePan' );\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n        pan(panDelta.x, panDelta.y);\n        panStart.copy(panEnd);\n        scope.update();\n      } //\n      // event handlers - FSM: listen for events and reset state\n      //\n\n\n      function onMouseDown(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n\n        if (event.button === scope.mouseButtons.ORBIT) {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        } else if (event.button === scope.mouseButtons.ZOOM) {\n          if (scope.enableZoom === false) return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n        } else if (event.button === scope.mouseButtons.PAN) {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n\n        if (state !== STATE.NONE) {\n          document.addEventListener('mousemove', onMouseMove, false);\n          document.addEventListener('mouseup', onMouseUp, false);\n          scope.dispatchEvent(startEvent);\n        }\n      }\n\n      function onMouseMove(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n\n        if (state === STATE.ROTATE) {\n          if (scope.enableRotate === false) return;\n          handleMouseMoveRotate(event);\n        } else if (state === STATE.DOLLY) {\n          if (scope.enableZoom === false) return;\n          handleMouseMoveDolly(event);\n        } else if (state === STATE.PAN) {\n          if (scope.enablePan === false) return;\n          handleMouseMovePan(event);\n        }\n      }\n\n      function onMouseUp(event) {\n        if (scope.enabled === false) return;\n        document.removeEventListener('mousemove', onMouseMove, false);\n        document.removeEventListener('mouseup', onMouseUp, false);\n        scope.dispatchEvent(endEvent);\n        state = STATE.NONE;\n      }\n\n      function onMouseWheel(event) {\n        if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n        event.preventDefault();\n        event.stopPropagation();\n        handleMouseWheel(event);\n        scope.dispatchEvent(startEvent); // not sure why these are here...\n\n        scope.dispatchEvent(endEvent);\n      }\n\n      function onKeyDown(event) {\n        if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n        handleKeyDown(event);\n      }\n\n      function onTouchStart(event) {\n        if (scope.enabled === false) return;\n\n        switch (event.touches.length) {\n          case 1:\n            // one-fingered touch: rotate\n            if (scope.enableRotate === false) return;\n            handleTouchStartRotate(event);\n            state = STATE.TOUCH_ROTATE;\n            break;\n\n          case 2:\n            // two-fingered touch: dolly\n            if (scope.enableZoom === false) return;\n            handleTouchStartDolly(event);\n            state = STATE.TOUCH_DOLLY;\n            break;\n\n          case 3:\n            // three-fingered touch: pan\n            if (scope.enablePan === false) return;\n            handleTouchStartPan(event);\n            state = STATE.TOUCH_PAN;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        if (state !== STATE.NONE) {\n          scope.dispatchEvent(startEvent);\n        }\n      }\n\n      function onTouchMove(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n        event.stopPropagation();\n\n        switch (event.touches.length) {\n          case 1:\n            // one-fingered touch: rotate\n            if (scope.enableRotate === false) return;\n            if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n            handleTouchMoveRotate(event);\n            break;\n\n          case 2:\n            // two-fingered touch: dolly\n            if (scope.enableZoom === false) return;\n            if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n            handleTouchMoveDolly(event);\n            break;\n\n          case 3:\n            // three-fingered touch: pan\n            if (scope.enablePan === false) return;\n            if (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n            handleTouchMovePan(event);\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n      }\n\n      function onTouchEnd(event) {\n        if (scope.enabled === false) return;\n        scope.dispatchEvent(endEvent);\n        state = STATE.NONE;\n      }\n\n      function onContextMenu(event) {\n        event.preventDefault();\n      } //\n\n\n      scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n      scope.domElement.addEventListener('mousedown', onMouseDown, false);\n      scope.domElement.addEventListener('wheel', onMouseWheel, false);\n      scope.domElement.addEventListener('touchstart', onTouchStart, false);\n      scope.domElement.addEventListener('touchend', onTouchEnd, false);\n      scope.domElement.addEventListener('touchmove', onTouchMove, false);\n      window.addEventListener('keydown', onKeyDown, false); // force an update at start\n\n      _this.update();\n\n      return _this;\n    }\n\n    _createClass(OrbitControls, [{\n      key: \"center\",\n      get: function get() {\n        console.warn('OrbitControls: .center has been renamed to .target');\n        return this.target;\n      } // backward compatibility\n\n    }, {\n      key: \"noZoom\",\n      get: function get() {\n        console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        return !this.enableZoom;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        this.enableZoom = !value;\n      }\n    }, {\n      key: \"noRotate\",\n      get: function get() {\n        console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n        return !this.enableRotate;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n        this.enableRotate = !value;\n      }\n    }, {\n      key: \"noPan\",\n      get: function get() {\n        console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        return !this.enablePan;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        this.enablePan = !value;\n      }\n    }, {\n      key: \"noKeys\",\n      get: function get() {\n        console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        return !this.enableKeys;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        this.enableKeys = !value;\n      }\n    }, {\n      key: \"staticMoving\",\n      get: function get() {\n        console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n        return !this.enableDamping;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n        this.enableDamping = !value;\n      }\n    }, {\n      key: \"dynamicDampingFactor\",\n      get: function get() {\n        console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n        return this.dampingFactor;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n        this.dampingFactor = value;\n      }\n    }]);\n\n    return OrbitControls;\n  }(three.EventDispatcher);\n\n  return OrbitControls;\n});","map":{"version":3,"sources":["C:/cygwin64/home/giles/projs/personal/getalife/prototype/node_modules/orbit-controls-es6/build/orbit-controls-es6.umd.js"],"names":["global","factory","exports","module","require","define","amd","orbitControls","three","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","OrbitControls","_EventDispatcher","object","domElement","_this","undefined","document","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","reset","scope","copy","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","preventDefault","button","addEventListener","stopPropagation","get","EventDispatcher"],"mappings":"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","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('three')) :\n  typeof define === 'function' && define.amd ? define(['three'], factory) :\n  (global.orbitControls = factory(global.three));\n}(this, (function (three) { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n\n  var OrbitControls =\n  /*#__PURE__*/\n  function (_EventDispatcher) {\n    _inherits(OrbitControls, _EventDispatcher);\n\n    function OrbitControls(object, domElement) {\n      var _this;\n\n      _classCallCheck(this, OrbitControls);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(OrbitControls).call(this));\n      _this.object = object;\n      _this.domElement = domElement !== undefined ? domElement : document; // Set to false to disable this control\n\n      _this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n      _this.target = new three.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n      _this.minDistance = 0;\n      _this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n      _this.minZoom = 0;\n      _this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n      // Range is 0 to Math.PI radians.\n\n      _this.minPolarAngle = 0; // radians\n\n      _this.maxPolarAngle = Math.PI; // radians\n      // How far you can orbit horizontally, upper and lower limits.\n      // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\n      _this.minAzimuthAngle = -Infinity; // radians\n\n      _this.maxAzimuthAngle = Infinity; // radians\n      // Set to true to enable damping (inertia)\n      // If damping is enabled, you must call controls.update() in your animation loop\n\n      _this.enableDamping = false;\n      _this.dampingFactor = 0.25; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n      // Set to false to disable zooming\n\n      _this.enableZoom = true;\n      _this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n      _this.enableRotate = true;\n      _this.rotateSpeed = 1.0; // Set to false to disable panning\n\n      _this.enablePan = true;\n      _this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n      // Set to true to automatically rotate around the target\n      // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n      _this.autoRotate = false;\n      _this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n      // Set to false to disable use of the keys\n\n      _this.enableKeys = true; // The four arrow keys\n\n      _this.keys = {\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        BOTTOM: 40\n      }; // Mouse buttons\n\n      _this.mouseButtons = {\n        ORBIT: three.MOUSE.LEFT,\n        ZOOM: three.MOUSE.MIDDLE,\n        PAN: three.MOUSE.RIGHT\n      }; // for reset\n\n      _this.target0 = _this.target.clone();\n      _this.position0 = _this.object.position.clone();\n      _this.zoom0 = _this.object.zoom; //\n      // public methods\n      //\n\n      _this.getPolarAngle = function () {\n        return spherical.phi;\n      };\n\n      _this.getAzimuthalAngle = function () {\n        return spherical.theta;\n      };\n\n      _this.reset = function () {\n        scope.target.copy(scope.target0);\n        scope.object.position.copy(scope.position0);\n        scope.object.zoom = scope.zoom0;\n        scope.object.updateProjectionMatrix();\n        scope.dispatchEvent(changeEvent);\n        scope.update();\n        state = STATE.NONE;\n      }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n      _this.update = function () {\n        var offset = new three.Vector3(); // so camera.up is the orbit axis\n\n        var quat = new three.Quaternion().setFromUnitVectors(object.up, new three.Vector3(0, 1, 0));\n        var quatInverse = quat.clone().inverse();\n        var lastPosition = new three.Vector3();\n        var lastQuaternion = new three.Quaternion();\n        return function update() {\n          var position = scope.object.position;\n          offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n          offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n          spherical.setFromVector3(offset);\n\n          if (scope.autoRotate && state === STATE.NONE) {\n            rotateLeft(getAutoRotationAngle());\n          }\n\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi; // restrict theta to be between desired limits\n\n          spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\n\n          spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n          spherical.makeSafe();\n          spherical.radius *= scale; // restrict radius to be between desired limits\n\n          spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n          scope.target.add(panOffset);\n          offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n          offset.applyQuaternion(quatInverse);\n          position.copy(scope.target).add(offset);\n          scope.object.lookAt(scope.target);\n\n          if (scope.enableDamping === true) {\n            sphericalDelta.theta *= 1 - scope.dampingFactor;\n            sphericalDelta.phi *= 1 - scope.dampingFactor;\n          } else {\n            sphericalDelta.set(0, 0, 0);\n          }\n\n          scale = 1;\n          panOffset.set(0, 0, 0); // update condition is:\n          // min(camera displacement, camera rotation in radians)^2 > EPS\n          // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n          if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n            scope.dispatchEvent(changeEvent);\n            lastPosition.copy(scope.object.position);\n            lastQuaternion.copy(scope.object.quaternion);\n            zoomChanged = false;\n            return true;\n          }\n\n          return false;\n        };\n      }();\n\n      _this.dispose = function () {\n        scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n        scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n        scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n        scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n        scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n        scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n        document.removeEventListener('mousemove', onMouseMove, false);\n        document.removeEventListener('mouseup', onMouseUp, false);\n        window.removeEventListener('keydown', onKeyDown, false); // scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n      }; //\n      // internals\n      //\n\n\n      var scope = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var changeEvent = {\n        type: 'change'\n      };\n      var startEvent = {\n        type: 'start'\n      };\n      var endEvent = {\n        type: 'end'\n      };\n      var STATE = {\n        NONE: -1,\n        ROTATE: 0,\n        DOLLY: 1,\n        PAN: 2,\n        TOUCH_ROTATE: 3,\n        TOUCH_DOLLY: 4,\n        TOUCH_PAN: 5\n      };\n      var state = STATE.NONE;\n      var EPS = 0.000001; // current position in spherical coordinates\n\n      var spherical = new three.Spherical();\n      var sphericalDelta = new three.Spherical();\n      var scale = 1;\n      var panOffset = new three.Vector3();\n      var zoomChanged = false;\n      var rotateStart = new three.Vector2();\n      var rotateEnd = new three.Vector2();\n      var rotateDelta = new three.Vector2();\n      var panStart = new three.Vector2();\n      var panEnd = new three.Vector2();\n      var panDelta = new three.Vector2();\n      var dollyStart = new three.Vector2();\n      var dollyEnd = new three.Vector2();\n      var dollyDelta = new three.Vector2();\n\n      function getAutoRotationAngle() {\n        return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n      }\n\n      function getZoomScale() {\n        return Math.pow(0.95, scope.zoomSpeed);\n      }\n\n      function rotateLeft(angle) {\n        sphericalDelta.theta -= angle;\n      }\n\n      function rotateUp(angle) {\n        sphericalDelta.phi -= angle;\n      }\n\n      var panLeft = function () {\n        var v = new three.Vector3();\n        return function panLeft(distance, objectMatrix) {\n          v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n          v.multiplyScalar(-distance);\n          panOffset.add(v);\n        };\n      }();\n\n      var panUp = function () {\n        var v = new three.Vector3();\n        return function panUp(distance, objectMatrix) {\n          v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n\n          v.multiplyScalar(distance);\n          panOffset.add(v);\n        };\n      }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n      var pan = function () {\n        var offset = new three.Vector3();\n        return function pan(deltaX, deltaY) {\n          var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n          if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n            // perspective\n            var position = scope.object.position;\n            offset.copy(position).sub(scope.target);\n            var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n            targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we actually don't use screenWidth, since perspective camera is fixed to screen height\n\n            panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n            panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n          } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n            // orthographic\n            panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n            panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n          } else {\n            // camera neither orthographic nor perspective\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n            scope.enablePan = false;\n          }\n        };\n      }();\n\n      function dollyIn(dollyScale) {\n        if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n          scale /= dollyScale;\n        } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n          scope.object.updateProjectionMatrix();\n          zoomChanged = true;\n        } else {\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n          scope.enableZoom = false;\n        }\n      }\n\n      function dollyOut(dollyScale) {\n        if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n          scale *= dollyScale;\n        } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n          scope.object.updateProjectionMatrix();\n          zoomChanged = true;\n        } else {\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n          scope.enableZoom = false;\n        }\n      } //\n      // event callbacks - update the object state\n      //\n\n\n      function handleMouseDownRotate(event) {\n        // console.log( 'handleMouseDownRotate' );\n        rotateStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseDownDolly(event) {\n        // console.log( 'handleMouseDownDolly' );\n        dollyStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseDownPan(event) {\n        // console.log( 'handleMouseDownPan' );\n        panStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseMoveRotate(event) {\n        // console.log( 'handleMouseMoveRotate' );\n        rotateEnd.set(event.clientX, event.clientY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement; // rotating across whole screen goes 360 degrees around\n\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed); // rotating up and down along whole screen attempts to go 360, but limited to 180\n\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n        rotateStart.copy(rotateEnd);\n        scope.update();\n      }\n\n      function handleMouseMoveDolly(event) {\n        // console.log( 'handleMouseMoveDolly' );\n        dollyEnd.set(event.clientX, event.clientY);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          dollyIn(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          dollyOut(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n        scope.update();\n      }\n\n      function handleMouseMovePan(event) {\n        // console.log( 'handleMouseMovePan' );\n        panEnd.set(event.clientX, event.clientY);\n        panDelta.subVectors(panEnd, panStart);\n        pan(panDelta.x, panDelta.y);\n        panStart.copy(panEnd);\n        scope.update();\n      }\n\n      function handleMouseWheel(event) {\n        // console.log( 'handleMouseWheel' );\n        if (event.deltaY < 0) {\n          dollyOut(getZoomScale());\n        } else if (event.deltaY > 0) {\n          dollyIn(getZoomScale());\n        }\n\n        scope.update();\n      }\n\n      function handleKeyDown(event) {\n        // console.log( 'handleKeyDown' );\n        switch (event.keyCode) {\n          case scope.keys.UP:\n            pan(0, scope.keyPanSpeed);\n            scope.update();\n            break;\n\n          case scope.keys.BOTTOM:\n            pan(0, -scope.keyPanSpeed);\n            scope.update();\n            break;\n\n          case scope.keys.LEFT:\n            pan(scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n\n          case scope.keys.RIGHT:\n            pan(-scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n        }\n      }\n\n      function handleTouchStartRotate(event) {\n        // console.log( 'handleTouchStartRotate' );\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      }\n\n      function handleTouchStartDolly(event) {\n        // console.log( 'handleTouchStartDolly' );\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        dollyStart.set(0, distance);\n      }\n\n      function handleTouchStartPan(event) {\n        // console.log( 'handleTouchStartPan' );\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      }\n\n      function handleTouchMoveRotate(event) {\n        // console.log( 'handleTouchMoveRotate' );\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement; // rotating across whole screen goes 360 degrees around\n\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed); // rotating up and down along whole screen attempts to go 360, but limited to 180\n\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n        rotateStart.copy(rotateEnd);\n        scope.update();\n      }\n\n      function handleTouchMoveDolly(event) {\n        // console.log( 'handleTouchMoveDolly' );\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        dollyEnd.set(0, distance);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          dollyOut(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          dollyIn(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n        scope.update();\n      }\n\n      function handleTouchMovePan(event) {\n        // console.log( 'handleTouchMovePan' );\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n        pan(panDelta.x, panDelta.y);\n        panStart.copy(panEnd);\n        scope.update();\n      } //\n      // event handlers - FSM: listen for events and reset state\n      //\n\n\n      function onMouseDown(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n\n        if (event.button === scope.mouseButtons.ORBIT) {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        } else if (event.button === scope.mouseButtons.ZOOM) {\n          if (scope.enableZoom === false) return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n        } else if (event.button === scope.mouseButtons.PAN) {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n\n        if (state !== STATE.NONE) {\n          document.addEventListener('mousemove', onMouseMove, false);\n          document.addEventListener('mouseup', onMouseUp, false);\n          scope.dispatchEvent(startEvent);\n        }\n      }\n\n      function onMouseMove(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n\n        if (state === STATE.ROTATE) {\n          if (scope.enableRotate === false) return;\n          handleMouseMoveRotate(event);\n        } else if (state === STATE.DOLLY) {\n          if (scope.enableZoom === false) return;\n          handleMouseMoveDolly(event);\n        } else if (state === STATE.PAN) {\n          if (scope.enablePan === false) return;\n          handleMouseMovePan(event);\n        }\n      }\n\n      function onMouseUp(event) {\n        if (scope.enabled === false) return;\n        document.removeEventListener('mousemove', onMouseMove, false);\n        document.removeEventListener('mouseup', onMouseUp, false);\n        scope.dispatchEvent(endEvent);\n        state = STATE.NONE;\n      }\n\n      function onMouseWheel(event) {\n        if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n        event.preventDefault();\n        event.stopPropagation();\n        handleMouseWheel(event);\n        scope.dispatchEvent(startEvent); // not sure why these are here...\n\n        scope.dispatchEvent(endEvent);\n      }\n\n      function onKeyDown(event) {\n        if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n        handleKeyDown(event);\n      }\n\n      function onTouchStart(event) {\n        if (scope.enabled === false) return;\n\n        switch (event.touches.length) {\n          case 1:\n            // one-fingered touch: rotate\n            if (scope.enableRotate === false) return;\n            handleTouchStartRotate(event);\n            state = STATE.TOUCH_ROTATE;\n            break;\n\n          case 2:\n            // two-fingered touch: dolly\n            if (scope.enableZoom === false) return;\n            handleTouchStartDolly(event);\n            state = STATE.TOUCH_DOLLY;\n            break;\n\n          case 3:\n            // three-fingered touch: pan\n            if (scope.enablePan === false) return;\n            handleTouchStartPan(event);\n            state = STATE.TOUCH_PAN;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        if (state !== STATE.NONE) {\n          scope.dispatchEvent(startEvent);\n        }\n      }\n\n      function onTouchMove(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n        event.stopPropagation();\n\n        switch (event.touches.length) {\n          case 1:\n            // one-fingered touch: rotate\n            if (scope.enableRotate === false) return;\n            if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n            handleTouchMoveRotate(event);\n            break;\n\n          case 2:\n            // two-fingered touch: dolly\n            if (scope.enableZoom === false) return;\n            if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n            handleTouchMoveDolly(event);\n            break;\n\n          case 3:\n            // three-fingered touch: pan\n            if (scope.enablePan === false) return;\n            if (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n            handleTouchMovePan(event);\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n      }\n\n      function onTouchEnd(event) {\n        if (scope.enabled === false) return;\n        scope.dispatchEvent(endEvent);\n        state = STATE.NONE;\n      }\n\n      function onContextMenu(event) {\n        event.preventDefault();\n      } //\n\n\n      scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n      scope.domElement.addEventListener('mousedown', onMouseDown, false);\n      scope.domElement.addEventListener('wheel', onMouseWheel, false);\n      scope.domElement.addEventListener('touchstart', onTouchStart, false);\n      scope.domElement.addEventListener('touchend', onTouchEnd, false);\n      scope.domElement.addEventListener('touchmove', onTouchMove, false);\n      window.addEventListener('keydown', onKeyDown, false); // force an update at start\n\n      _this.update();\n\n      return _this;\n    }\n\n    _createClass(OrbitControls, [{\n      key: \"center\",\n      get: function get() {\n        console.warn('OrbitControls: .center has been renamed to .target');\n        return this.target;\n      } // backward compatibility\n\n    }, {\n      key: \"noZoom\",\n      get: function get() {\n        console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        return !this.enableZoom;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        this.enableZoom = !value;\n      }\n    }, {\n      key: \"noRotate\",\n      get: function get() {\n        console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n        return !this.enableRotate;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n        this.enableRotate = !value;\n      }\n    }, {\n      key: \"noPan\",\n      get: function get() {\n        console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        return !this.enablePan;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        this.enablePan = !value;\n      }\n    }, {\n      key: \"noKeys\",\n      get: function get() {\n        console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        return !this.enableKeys;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        this.enableKeys = !value;\n      }\n    }, {\n      key: \"staticMoving\",\n      get: function get() {\n        console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n        return !this.enableDamping;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n        this.enableDamping = !value;\n      }\n    }, {\n      key: \"dynamicDampingFactor\",\n      get: function get() {\n        console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n        return this.dampingFactor;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n        this.dampingFactor = value;\n      }\n    }]);\n\n    return OrbitControls;\n  }(three.EventDispatcher);\n\n  return OrbitControls;\n\n})));\n"]},"metadata":{},"sourceType":"script"}
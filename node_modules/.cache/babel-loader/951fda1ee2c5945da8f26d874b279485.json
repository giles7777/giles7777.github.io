{"ast":null,"code":"import { __assign, __extends, __rest } from \"tslib\";\nimport React from 'react';\nimport { classNames, Tag } from '@rmwc/base';\n\nvar possiblyFocusElement = function (el) {\n  if (!el) return false;\n  var tabIndex = el.getAttribute('tabindex');\n\n  if (tabIndex && Number(tabIndex) >= 0) {\n    el.focus();\n    return true;\n  }\n\n  return false;\n};\n\nvar getNextSibling = function (el, isBack) {\n  if (!el) return null;\n  var next = isBack ? el.previousElementSibling : el.nextElementSibling;\n\n  if (next === null) {\n    return getNextSibling(el.parentElement, isBack);\n  }\n\n  return next;\n};\n/** A collapsible list component. */\n\n\nvar CollapsibleList =\n/** @class */\nfunction (_super) {\n  __extends(CollapsibleList, _super);\n\n  function CollapsibleList(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.childContainer = null;\n    _this.root = null;\n    _this.rafId = null;\n    _this.timerId = null;\n    _this.state = {\n      open: !!_this.props.defaultOpen || !!_this.props.open,\n      childrenStyle: {}\n    };\n    _this.handleClick = _this.handleClick.bind(_this);\n    _this.handleKeydown = _this.handleKeydown.bind(_this);\n    _this.handleFocus = _this.handleFocus.bind(_this);\n    return _this;\n  }\n\n  CollapsibleList.getDerivedStateFromProps = function (props, state) {\n    if (props.open !== undefined && props.open !== state.open) {\n      return __assign(__assign({}, state), {\n        open: props.open\n      });\n    }\n\n    return state;\n  };\n\n  CollapsibleList.prototype.componentDidMount = function () {\n    this.syncOpenState();\n  };\n\n  CollapsibleList.prototype.componentDidUpdate = function (prevProps, prevState) {\n    if (prevState.open !== this.state.open) {\n      this.syncOpenState();\n    }\n  };\n\n  CollapsibleList.prototype.componentWillUnmount = function () {\n    this.rafId && window.cancelAnimationFrame(this.rafId);\n    this.timerId && window.clearTimeout(this.timerId);\n  };\n\n  CollapsibleList.prototype.syncOpenState = function () {\n    var _this = this;\n\n    var _a = this.props,\n        onOpen = _a.onOpen,\n        onClose = _a.onClose;\n    var childrenStyle = {\n      maxHeight: this.childContainer ? this.childContainer.offsetHeight + \"px\" : '0px'\n    };\n    this.setState({\n      childrenStyle: childrenStyle\n    }, function () {\n      if (_this.state.open) {\n        onOpen && onOpen();\n        _this.timerId = window.setTimeout(function () {\n          if (_this.state.open) {\n            _this.setState({\n              childrenStyle: {\n                maxHeight: 'none'\n              }\n            });\n          }\n        }, 300);\n      } else {\n        onClose && onClose();\n        _this.rafId = window.requestAnimationFrame(function () {\n          _this.setState({\n            childrenStyle: {}\n          });\n        });\n      }\n    });\n  };\n\n  CollapsibleList.prototype.correctFocus = function (back) {\n    var _this = this;\n\n    this.rafId = window.requestAnimationFrame(function () {\n      if (!_this.state.open && _this.root && _this.root.contains(document.activeElement)) {\n        var sibling = getNextSibling(_this.root, back);\n\n        if (possiblyFocusElement(sibling)) {\n          return;\n        }\n\n        if (sibling) {\n          var els = sibling.querySelectorAll('[tabindex]');\n\n          for (var i = 0; i < els.length; i++) {\n            if (possiblyFocusElement(els[i])) {\n              break;\n            }\n          }\n        }\n      }\n    });\n  };\n\n  CollapsibleList.prototype.toggleOpen = function (isOpen) {\n    this.setState({\n      open: isOpen\n    });\n  };\n\n  CollapsibleList.prototype.handleClick = function (evt) {\n    // call events that might have been on the handle\n    var handle = this.props.handle;\n    handle.props.onClick && handle.props.onClick(evt);\n    this.toggleOpen(!this.state.open);\n  };\n\n  CollapsibleList.prototype.handleKeydown = function (evt) {\n    // call events that might have been on the handle\n    var handle = this.props.handle;\n    handle.props.onKeyDown && handle.props.onKeyDown(evt);\n\n    switch (evt.which) {\n      case 13:\n        this.toggleOpen(!this.state.open);\n        return;\n\n      case 39:\n        this.toggleOpen(true);\n        return;\n\n      case 38:\n      case 40:\n      case 9:\n        var isBack = evt.shiftKey || evt.which === 38;\n        this.correctFocus(isBack);\n        return;\n\n      case 37:\n        this.toggleOpen(false);\n        return;\n\n      default:\n        break;\n    }\n  };\n\n  CollapsibleList.prototype.handleFocus = function (evt) {\n    if (!this.state.open && this.root && this.childContainer && this.childContainer.contains(document.activeElement)) {\n      var el = this.root.querySelector('.rmwc-collapsible-list__handle .mdc-list-item');\n      el && el.focus();\n    }\n  };\n\n  CollapsibleList.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        handle = _a.handle,\n        onOpen = _a.onOpen,\n        onClose = _a.onClose,\n        openProp = _a.open,\n        defaultOpen = _a.defaultOpen,\n        className = _a.className,\n        rest = __rest(_a, [\"children\", \"handle\", \"onOpen\", \"onClose\", \"open\", \"defaultOpen\", \"className\"]);\n\n    var _b = this.state,\n        open = _b.open,\n        childrenStyle = _b.childrenStyle;\n    return React.createElement(Tag, __assign({}, rest, {\n      onFocus: this.handleFocus,\n      ref: function (el) {\n        return _this.root = el;\n      },\n      className: classNames('rmwc-collapsible-list', className, {\n        'rmwc-collapsible-list--open': open\n      })\n    }), React.createElement(\"div\", {\n      className: \"rmwc-collapsible-list__handle\"\n    }, React.cloneElement(handle, __assign(__assign({}, handle.props), {\n      onClick: this.handleClick,\n      onKeyDown: this.handleKeydown\n    }))), React.createElement(\"div\", {\n      className: \"rmwc-collapsible-list__children\",\n      style: childrenStyle\n    }, React.createElement(\"div\", {\n      className: \"rmwc-collapsible-list__children-inner\",\n      ref: function (el) {\n        return _this.childContainer = el;\n      }\n    }, children)));\n  };\n\n  CollapsibleList.displayName = 'CollapsibleList';\n  return CollapsibleList;\n}(React.Component);\n\nexport { CollapsibleList };","map":{"version":3,"sources":["C:/cygwin64/home/giles/projs/personal/getalife/prototype/node_modules/@rmwc/list/next/collapsible-list.js"],"names":["__assign","__extends","__rest","React","classNames","Tag","possiblyFocusElement","el","tabIndex","getAttribute","Number","focus","getNextSibling","isBack","next","previousElementSibling","nextElementSibling","parentElement","CollapsibleList","_super","props","_this","call","childContainer","root","rafId","timerId","state","open","defaultOpen","childrenStyle","handleClick","bind","handleKeydown","handleFocus","getDerivedStateFromProps","undefined","prototype","componentDidMount","syncOpenState","componentDidUpdate","prevProps","prevState","componentWillUnmount","window","cancelAnimationFrame","clearTimeout","_a","onOpen","onClose","maxHeight","offsetHeight","setState","setTimeout","requestAnimationFrame","correctFocus","back","contains","document","activeElement","sibling","els","querySelectorAll","i","length","toggleOpen","isOpen","evt","handle","onClick","onKeyDown","which","shiftKey","querySelector","render","children","openProp","className","rest","_b","createElement","onFocus","ref","cloneElement","style","displayName","Component"],"mappings":"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","sourcesContent":["import { __assign, __extends, __rest } from \"tslib\";\nimport React from 'react';\nimport { classNames, Tag } from '@rmwc/base';\nvar possiblyFocusElement = function (el) {\n    if (!el)\n        return false;\n    var tabIndex = el.getAttribute('tabindex');\n    if (tabIndex && Number(tabIndex) >= 0) {\n        el.focus();\n        return true;\n    }\n    return false;\n};\nvar getNextSibling = function (el, isBack) {\n    if (!el)\n        return null;\n    var next = isBack ? el.previousElementSibling : el.nextElementSibling;\n    if (next === null) {\n        return getNextSibling(el.parentElement, isBack);\n    }\n    return next;\n};\n/** A collapsible list component. */\nvar CollapsibleList = /** @class */ (function (_super) {\n    __extends(CollapsibleList, _super);\n    function CollapsibleList(props) {\n        var _this = _super.call(this, props) || this;\n        _this.childContainer = null;\n        _this.root = null;\n        _this.rafId = null;\n        _this.timerId = null;\n        _this.state = {\n            open: !!_this.props.defaultOpen || !!_this.props.open,\n            childrenStyle: {}\n        };\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleKeydown = _this.handleKeydown.bind(_this);\n        _this.handleFocus = _this.handleFocus.bind(_this);\n        return _this;\n    }\n    CollapsibleList.getDerivedStateFromProps = function (props, state) {\n        if (props.open !== undefined && props.open !== state.open) {\n            return __assign(__assign({}, state), { open: props.open });\n        }\n        return state;\n    };\n    CollapsibleList.prototype.componentDidMount = function () {\n        this.syncOpenState();\n    };\n    CollapsibleList.prototype.componentDidUpdate = function (prevProps, prevState) {\n        if (prevState.open !== this.state.open) {\n            this.syncOpenState();\n        }\n    };\n    CollapsibleList.prototype.componentWillUnmount = function () {\n        this.rafId && window.cancelAnimationFrame(this.rafId);\n        this.timerId && window.clearTimeout(this.timerId);\n    };\n    CollapsibleList.prototype.syncOpenState = function () {\n        var _this = this;\n        var _a = this.props, onOpen = _a.onOpen, onClose = _a.onClose;\n        var childrenStyle = {\n            maxHeight: this.childContainer\n                ? this.childContainer.offsetHeight + \"px\"\n                : '0px'\n        };\n        this.setState({ childrenStyle: childrenStyle }, function () {\n            if (_this.state.open) {\n                onOpen && onOpen();\n                _this.timerId = window.setTimeout(function () {\n                    if (_this.state.open) {\n                        _this.setState({\n                            childrenStyle: {\n                                maxHeight: 'none'\n                            }\n                        });\n                    }\n                }, 300);\n            }\n            else {\n                onClose && onClose();\n                _this.rafId = window.requestAnimationFrame(function () {\n                    _this.setState({\n                        childrenStyle: {}\n                    });\n                });\n            }\n        });\n    };\n    CollapsibleList.prototype.correctFocus = function (back) {\n        var _this = this;\n        this.rafId = window.requestAnimationFrame(function () {\n            if (!_this.state.open &&\n                _this.root &&\n                _this.root.contains(document.activeElement)) {\n                var sibling = getNextSibling(_this.root, back);\n                if (possiblyFocusElement(sibling)) {\n                    return;\n                }\n                if (sibling) {\n                    var els = sibling.querySelectorAll('[tabindex]');\n                    for (var i = 0; i < els.length; i++) {\n                        if (possiblyFocusElement(els[i])) {\n                            break;\n                        }\n                    }\n                }\n            }\n        });\n    };\n    CollapsibleList.prototype.toggleOpen = function (isOpen) {\n        this.setState({ open: isOpen });\n    };\n    CollapsibleList.prototype.handleClick = function (evt) {\n        // call events that might have been on the handle\n        var handle = this.props.handle;\n        handle.props.onClick && handle.props.onClick(evt);\n        this.toggleOpen(!this.state.open);\n    };\n    CollapsibleList.prototype.handleKeydown = function (evt) {\n        // call events that might have been on the handle\n        var handle = this.props.handle;\n        handle.props.onKeyDown && handle.props.onKeyDown(evt);\n        switch (evt.which) {\n            case 13:\n                this.toggleOpen(!this.state.open);\n                return;\n            case 39:\n                this.toggleOpen(true);\n                return;\n            case 38:\n            case 40:\n            case 9:\n                var isBack = evt.shiftKey || evt.which === 38;\n                this.correctFocus(isBack);\n                return;\n            case 37:\n                this.toggleOpen(false);\n                return;\n            default:\n                break;\n        }\n    };\n    CollapsibleList.prototype.handleFocus = function (evt) {\n        if (!this.state.open &&\n            this.root &&\n            this.childContainer &&\n            this.childContainer.contains(document.activeElement)) {\n            var el = this.root.querySelector('.rmwc-collapsible-list__handle .mdc-list-item');\n            el && el.focus();\n        }\n    };\n    CollapsibleList.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, children = _a.children, handle = _a.handle, onOpen = _a.onOpen, onClose = _a.onClose, openProp = _a.open, defaultOpen = _a.defaultOpen, className = _a.className, rest = __rest(_a, [\"children\", \"handle\", \"onOpen\", \"onClose\", \"open\", \"defaultOpen\", \"className\"]);\n        var _b = this.state, open = _b.open, childrenStyle = _b.childrenStyle;\n        return (React.createElement(Tag, __assign({}, rest, { onFocus: this.handleFocus, ref: function (el) { return (_this.root = el); }, className: classNames('rmwc-collapsible-list', className, {\n                'rmwc-collapsible-list--open': open\n            }) }),\n            React.createElement(\"div\", { className: \"rmwc-collapsible-list__handle\" }, React.cloneElement(handle, __assign(__assign({}, handle.props), { onClick: this.handleClick, onKeyDown: this.handleKeydown }))),\n            React.createElement(\"div\", { className: \"rmwc-collapsible-list__children\", style: childrenStyle },\n                React.createElement(\"div\", { className: \"rmwc-collapsible-list__children-inner\", ref: function (el) { return (_this.childContainer = el); } }, children))));\n    };\n    CollapsibleList.displayName = 'CollapsibleList';\n    return CollapsibleList;\n}(React.Component));\nexport { CollapsibleList };\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { __assign, __read, __rest, __spread } from \"tslib\";\nimport { useCallback, useRef, useEffect } from 'react';\nimport { MDCMenuFoundation } from '@material/menu';\nimport { useFoundation, closest } from '@rmwc/base';\nexport var useMenuFoundation = function useMenuFoundation(props) {\n  var menuSurfaceApi = useRef();\n  var listApi = useRef();\n\n  var setListApi = function setListApi(api) {\n    listApi.current = api;\n  };\n\n  var setMenuSurfaceApi = function setMenuSurfaceApi(api) {\n    menuSurfaceApi.current = api;\n  };\n\n  var items = useCallback(function () {\n    var _a;\n\n    return ((_a = listApi.current) === null || _a === void 0 ? void 0 : _a.listElements()) || [];\n  }, []);\n\n  var _a = useFoundation({\n    props: __assign(__assign({}, props), {\n      // we don't want to pass the apiRef all the way through\n      apiRef: undefined\n    }),\n    elements: {\n      rootEl: true\n    },\n    foundation: function foundation(_a) {\n      var emit = _a.emit;\n      return new MDCMenuFoundation({\n        addClassToElementAtIndex: function addClassToElementAtIndex() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var _a;\n\n          return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.addClassToElementIndex.apply(_a, __spread(args));\n        },\n        removeClassFromElementAtIndex: function removeClassFromElementAtIndex() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var _a;\n\n          return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.removeClassFromElementAtIndex.apply(_a, __spread(args));\n        },\n        addAttributeToElementAtIndex: function addAttributeToElementAtIndex() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var _a;\n\n          return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.setAttributeForElementIndex.apply(_a, __spread(args));\n        },\n        removeAttributeFromElementAtIndex: function removeAttributeFromElementAtIndex(index, attr) {\n          var list = items();\n          list[index].removeAttribute(attr);\n        },\n        elementContainsClass: function elementContainsClass(element, className) {\n          return element.classList.contains(className);\n        },\n        closeSurface: function closeSurface() {\n          var _a;\n\n          (_a = menuSurfaceApi.current) === null || _a === void 0 ? void 0 : _a.setOpen(false);\n        },\n        getElementIndex: function getElementIndex(element) {\n          return items().indexOf(element);\n        },\n        notifySelected: function notifySelected(evtData) {\n          return emit('onSelect', {\n            index: evtData.index,\n            item: items()[evtData.index]\n          });\n        },\n        getMenuItemCount: function getMenuItemCount() {\n          var _a;\n\n          return ((_a = listApi.current) === null || _a === void 0 ? void 0 : _a.getListItemCount()) || 0;\n        },\n        focusItemAtIndex: function focusItemAtIndex() {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var _a;\n\n          return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.focusItemAtIndex.apply(_a, __spread(args));\n        },\n        focusListRoot: function focusListRoot() {\n          var _a;\n\n          return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.focusRoot();\n        }\n      });\n    }\n  }),\n      foundation = _a.foundation,\n      elements = __rest(_a, [\"foundation\"]);\n\n  var rootEl = elements.rootEl;\n  var handleClick = useCallback(function (evt) {\n    var _a;\n\n    (_a = props.onClick) === null || _a === void 0 ? void 0 : _a.call(props, evt); // fixes an issue with nested span element on list items\n\n    var el = closest(evt.target, '.mdc-list-item');\n    el && foundation.handleItemAction(el);\n  }, [foundation, props.onClick]);\n  var handleKeydown = useCallback(function (evt) {\n    var _a;\n\n    (_a = props.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n    foundation.handleKeydown(evt); // Jump through some hoops to find out\n    // that we are selecting the list item\n    // This is instead of trying to listen to an event on the list item\n    // which is what MDC does\n\n    if (evt.which === 13 && evt.target instanceof Element && listApi.current && evt.target.classList.contains(listApi.current.getClasses())) {\n      foundation.handleItemAction(evt.target);\n    }\n  }, [foundation, props.onKeyDown]);\n  var handleOpen = useCallback(function (evt) {\n    var _a;\n\n    var list = items();\n\n    if ((props.focusOnOpen || props.focusOnOpen === undefined) && list.length > 0 && !list.some(function (el) {\n      return el === document.activeElement;\n    })) {\n      list[0].focus();\n    }\n\n    (_a = props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n  }, [props.onOpen, props.focusOnOpen, items]);\n  rootEl.setProp('onKeyDown', handleKeydown, true);\n  rootEl.setProp('onClick', handleClick, true);\n  rootEl.setProp('onOpen', handleOpen, true);\n  var canSetApi = listApi.current && menuSurfaceApi.current && props.apiRef;\n  useEffect(function () {\n    if (listApi.current && menuSurfaceApi.current && props.apiRef) {\n      props.apiRef(__assign(__assign(__assign({}, listApi.current), menuSurfaceApi.current), {\n        items: items\n      }));\n    } // eslint-disable-next-line\n\n  }, [canSetApi, items]);\n  return __assign({\n    setListApi: setListApi,\n    setMenuSurfaceApi: setMenuSurfaceApi\n  }, elements);\n};","map":{"version":3,"sources":["C:/cygwin64/home/giles/projs/personal/getalife/prototype/node_modules/@rmwc/menu/next/menu/foundation.js"],"names":["__assign","__read","__rest","__spread","useCallback","useRef","useEffect","MDCMenuFoundation","useFoundation","closest","useMenuFoundation","props","menuSurfaceApi","listApi","setListApi","api","current","setMenuSurfaceApi","items","_a","listElements","apiRef","undefined","elements","rootEl","foundation","emit","addClassToElementAtIndex","args","_i","arguments","length","addClassToElementIndex","apply","removeClassFromElementAtIndex","addAttributeToElementAtIndex","setAttributeForElementIndex","removeAttributeFromElementAtIndex","index","attr","list","removeAttribute","elementContainsClass","element","className","classList","contains","closeSurface","setOpen","getElementIndex","indexOf","notifySelected","evtData","item","getMenuItemCount","getListItemCount","focusItemAtIndex","focusListRoot","focusRoot","handleClick","evt","onClick","call","el","target","handleItemAction","handleKeydown","onKeyDown","which","Element","getClasses","handleOpen","focusOnOpen","some","document","activeElement","focus","onOpen","setProp","canSetApi"],"mappings":"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","sourcesContent":["import { __assign, __read, __rest, __spread } from \"tslib\";\nimport { useCallback, useRef, useEffect } from 'react';\nimport { MDCMenuFoundation } from '@material/menu';\nimport { useFoundation, closest } from '@rmwc/base';\nexport var useMenuFoundation = function (props) {\n    var menuSurfaceApi = useRef();\n    var listApi = useRef();\n    var setListApi = function (api) {\n        listApi.current = api;\n    };\n    var setMenuSurfaceApi = function (api) {\n        menuSurfaceApi.current = api;\n    };\n    var items = useCallback(function () {\n        var _a;\n        return ((_a = listApi.current) === null || _a === void 0 ? void 0 : _a.listElements()) || [];\n    }, []);\n    var _a = useFoundation({\n        props: __assign(__assign({}, props), { \n            // we don't want to pass the apiRef all the way through\n            apiRef: undefined }),\n        elements: {\n            rootEl: true\n        },\n        foundation: function (_a) {\n            var emit = _a.emit;\n            return new MDCMenuFoundation({\n                addClassToElementAtIndex: function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a;\n                    return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.addClassToElementIndex.apply(_a, __spread(args));\n                },\n                removeClassFromElementAtIndex: function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a;\n                    return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.removeClassFromElementAtIndex.apply(_a, __spread(args));\n                },\n                addAttributeToElementAtIndex: function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a;\n                    return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.setAttributeForElementIndex.apply(_a, __spread(args));\n                },\n                removeAttributeFromElementAtIndex: function (index, attr) {\n                    var list = items();\n                    list[index].removeAttribute(attr);\n                },\n                elementContainsClass: function (element, className) {\n                    return element.classList.contains(className);\n                },\n                closeSurface: function () {\n                    var _a;\n                    (_a = menuSurfaceApi.current) === null || _a === void 0 ? void 0 : _a.setOpen(false);\n                },\n                getElementIndex: function (element) {\n                    return items().indexOf(element);\n                },\n                notifySelected: function (evtData) {\n                    return emit('onSelect', {\n                        index: evtData.index,\n                        item: items()[evtData.index]\n                    });\n                },\n                getMenuItemCount: function () { var _a; return ((_a = listApi.current) === null || _a === void 0 ? void 0 : _a.getListItemCount()) || 0; },\n                focusItemAtIndex: function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a;\n                    return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.focusItemAtIndex.apply(_a, __spread(args));\n                },\n                focusListRoot: function () { var _a; return (_a = listApi.current) === null || _a === void 0 ? void 0 : _a.focusRoot(); }\n            });\n        }\n    }), foundation = _a.foundation, elements = __rest(_a, [\"foundation\"]);\n    var rootEl = elements.rootEl;\n    var handleClick = useCallback(function (evt) {\n        var _a;\n        (_a = props.onClick) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n        // fixes an issue with nested span element on list items\n        var el = closest(evt.target, '.mdc-list-item');\n        el && foundation.handleItemAction(el);\n    }, [foundation, props.onClick]);\n    var handleKeydown = useCallback(function (evt) {\n        var _a;\n        (_a = props.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n        foundation.handleKeydown(evt);\n        // Jump through some hoops to find out\n        // that we are selecting the list item\n        // This is instead of trying to listen to an event on the list item\n        // which is what MDC does\n        if (evt.which === 13 &&\n            evt.target instanceof Element &&\n            listApi.current &&\n            evt.target.classList.contains(listApi.current.getClasses())) {\n            foundation.handleItemAction(evt.target);\n        }\n    }, [foundation, props.onKeyDown]);\n    var handleOpen = useCallback(function (evt) {\n        var _a;\n        var list = items();\n        if ((props.focusOnOpen || props.focusOnOpen === undefined) &&\n            list.length > 0 &&\n            !list.some(function (el) { return el === document.activeElement; })) {\n            list[0].focus();\n        }\n        (_a = props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n    }, [props.onOpen, props.focusOnOpen, items]);\n    rootEl.setProp('onKeyDown', handleKeydown, true);\n    rootEl.setProp('onClick', handleClick, true);\n    rootEl.setProp('onOpen', handleOpen, true);\n    var canSetApi = listApi.current && menuSurfaceApi.current && props.apiRef;\n    useEffect(function () {\n        if (listApi.current && menuSurfaceApi.current && props.apiRef) {\n            props.apiRef(__assign(__assign(__assign({}, listApi.current), menuSurfaceApi.current), { items: items }));\n        }\n        // eslint-disable-next-line\n    }, [canSetApi, items]);\n    return __assign({ setListApi: setListApi, setMenuSurfaceApi: setMenuSurfaceApi }, elements);\n};\n"]},"metadata":{},"sourceType":"module"}
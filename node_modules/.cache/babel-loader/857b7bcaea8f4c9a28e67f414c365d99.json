{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { useEffect, useCallback } from 'react';\nimport { MDCListFoundation } from '@material/list';\nimport { matches } from '@rmwc/base';\nimport { useFoundation } from '@rmwc/base';\nexport var useListFoundation = function useListFoundation(props) {\n  var _listElements = useCallback(function (el) {\n    if (el) {\n      return [].slice.call(el.querySelectorAll(\".\" + MDCListFoundation.cssClasses.LIST_ITEM_CLASS));\n    }\n\n    return [];\n  }, []);\n\n  var _a = useFoundation({\n    props: props,\n    api: function api(_a) {\n      var rootEl = _a.rootEl,\n          foundation = _a.foundation;\n      var adapter = foundation.adapter_;\n      return {\n        listElements: function listElements() {\n          return _listElements(rootEl.ref);\n        },\n        focusRoot: function focusRoot() {\n          return rootEl.ref && rootEl.ref.focus();\n        },\n        getClasses: function getClasses() {\n          return MDCListFoundation.cssClasses.LIST_ITEM_CLASS;\n        },\n        addClassToElementIndex: adapter.addClassForElementIndex,\n        removeClassFromElementAtIndex: adapter.removeClassForElementIndex,\n        setAttributeForElementIndex: adapter.setAttributeForElementIndex,\n        getListItemCount: adapter.getListItemCount,\n        focusItemAtIndex: adapter.focusItemAtIndex\n      };\n    },\n    elements: {\n      rootEl: true\n    },\n    foundation: function foundation(_a) {\n      var rootEl = _a.rootEl,\n          emit = _a.emit;\n      return new MDCListFoundation({\n        getListItemCount: function getListItemCount() {\n          return _listElements(rootEl.ref).length;\n        },\n        getFocusedElementIndex: function getFocusedElementIndex() {\n          return _listElements(rootEl.ref).indexOf(document.activeElement);\n        },\n        listItemAtIndexHasClass: function listItemAtIndexHasClass(index, className) {\n          var element = _listElements(rootEl.ref)[index];\n\n          return !!(element === null || element === void 0 ? void 0 : element.classList.contains(className));\n        },\n        setAttributeForElementIndex: function setAttributeForElementIndex(index, attr, value) {\n          // This value is getting set and never getting set back\n          // This is causing list items to be un-tabbable\n          // if (attr === 'tabindex' && value === -1) {\n          //   return;\n          // }\n          if (attr === 'tabindex') {\n            attr = 'tabIndex';\n          }\n\n          var element = _listElements(rootEl.ref)[index];\n\n          if (element) {\n            element.setAttribute(attr, String(value));\n          }\n        },\n        addClassForElementIndex: function addClassForElementIndex(index, className) {\n          var element = _listElements(rootEl.ref)[index];\n\n          if (element) {\n            element.classList.add(className);\n          }\n        },\n        removeClassForElementIndex: function removeClassForElementIndex(index, className) {\n          var element = _listElements(rootEl.ref)[index];\n\n          if (element) {\n            element.classList.remove(className);\n          }\n        },\n        focusItemAtIndex: function focusItemAtIndex(index) {\n          var element = _listElements(rootEl.ref)[index];\n\n          if (element) {\n            element.focus();\n          }\n        },\n        setTabIndexForListItemChildren: function setTabIndexForListItemChildren(listItemIndex, tabIndexValue) {\n          var element = _listElements(rootEl.ref)[listItemIndex];\n\n          var listItemChildren = [].slice.call(element.querySelectorAll(MDCListFoundation.strings.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX));\n          listItemChildren.forEach(function (ele) {\n            return ele.setAttribute('tabindex', String(tabIndexValue));\n          });\n        },\n        hasCheckboxAtIndex: function hasCheckboxAtIndex(index) {\n          var listItem = _listElements(rootEl.ref)[index];\n\n          return !!listItem.querySelector(MDCListFoundation.strings.CHECKBOX_SELECTOR);\n        },\n        hasRadioAtIndex: function hasRadioAtIndex(index) {\n          var listItem = _listElements(rootEl.ref)[index];\n\n          return !!listItem.querySelector(MDCListFoundation.strings.RADIO_SELECTOR);\n        },\n        isCheckboxCheckedAtIndex: function isCheckboxCheckedAtIndex(index) {\n          var listItem = _listElements(rootEl.ref)[index];\n\n          var toggleEl = listItem.querySelector(MDCListFoundation.strings.CHECKBOX_SELECTOR);\n          return toggleEl ? toggleEl.checked : false;\n        },\n        setCheckedCheckboxOrRadioAtIndex: function setCheckedCheckboxOrRadioAtIndex(index, isChecked) {\n          var listItem = _listElements(rootEl.ref)[index];\n\n          var toggleEl = listItem.querySelector(MDCListFoundation.strings.CHECKBOX_RADIO_SELECTOR);\n\n          if (toggleEl) {\n            toggleEl.checked = isChecked;\n            var event_1 = document.createEvent('Event');\n            event_1.initEvent('change', true, true);\n            toggleEl.dispatchEvent(event_1);\n          }\n        },\n        notifyAction: function notifyAction(index) {\n          emit('onAction', {\n            index: index\n          });\n        },\n        isFocusInsideList: function isFocusInsideList() {\n          var _a;\n\n          return !!((_a = rootEl.ref) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement));\n        },\n        isRootFocused: function isRootFocused() {\n          return document.activeElement === rootEl.ref;\n        }\n      });\n    }\n  }),\n      foundation = _a.foundation,\n      elements = __rest(_a, [\"foundation\"]);\n\n  var rootEl = elements.rootEl;\n  /**\n   * Used to figure out which list item this event is targetting. Or returns -1 if\n   * there is no list item\n   */\n\n  var getListItemIndex = useCallback(function (evt) {\n    var eventTarget = evt.target;\n    var index = -1; // Find the first ancestor that is a list item or the list.\n\n    while (eventTarget && !eventTarget.classList.contains(MDCListFoundation.cssClasses.LIST_ITEM_CLASS) && !eventTarget.classList.contains(MDCListFoundation.cssClasses.ROOT)) {\n      eventTarget = eventTarget.parentElement;\n    } // Get the index of the element if it is a list item.\n\n\n    if (eventTarget && eventTarget.classList.contains(MDCListFoundation.cssClasses.LIST_ITEM_CLASS)) {\n      index = _listElements(rootEl.ref).indexOf(eventTarget);\n    }\n\n    return index;\n  }, [_listElements, rootEl.ref]);\n  var handleClick = useCallback(function (evt) {\n    var _a;\n\n    (_a = props.onClick) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n    var index = getListItemIndex(evt); // Toggle the checkbox only if it's not the target of the event, or the checkbox will have 2 change events.\n\n    var toggleCheckbox = !matches(evt.target, MDCListFoundation.strings.CHECKBOX_RADIO_SELECTOR);\n    foundation.handleClick(index, toggleCheckbox);\n  }, [getListItemIndex, foundation, props.onClick]);\n  var handleKeydown = useCallback(function (evt) {\n    var _a;\n\n    (_a = props.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n    var index = getListItemIndex(evt);\n\n    if (index >= 0) {\n      foundation.handleKeydown(evt, evt.target instanceof Element && evt.target.classList.contains(MDCListFoundation.cssClasses.LIST_ITEM_CLASS), index);\n    }\n  }, [getListItemIndex, foundation, props.onKeyDown]);\n  var handleFocusIn = useCallback(function (evt) {\n    var _a;\n\n    (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n    foundation.handleFocusIn(evt, getListItemIndex(evt));\n  }, [getListItemIndex, foundation, props.onFocus]);\n  var handleFocusOut = useCallback(function (evt) {\n    var _a;\n\n    (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n    foundation.handleFocusOut(evt, getListItemIndex(evt));\n  }, [getListItemIndex, foundation, props.onBlur]);\n  rootEl.setProp('onClick', handleClick, true);\n  rootEl.setProp('onKeyDown', handleKeydown, true);\n  rootEl.setProp('onFocus', handleFocusIn, true);\n  rootEl.setProp('onBlur', handleFocusOut, true); // layout on mount\n\n  useEffect(function () {\n    foundation.layout();\n  }, [foundation]);\n  useEffect(function () {\n    foundation.setWrapFocus(props.wrapFocus || props.wrapFocus === undefined);\n  }, [foundation, props.wrapFocus]);\n  useEffect(function () {\n    foundation.setVerticalOrientation(props.vertical || props.vertical === undefined);\n  }, [foundation, props.vertical]);\n  return __assign({}, elements);\n};","map":{"version":3,"sources":["C:/cygwin64/home/giles/projs/personal/getalife/prototype/node_modules/@rmwc/list/next/foundation.js"],"names":["__assign","__rest","useEffect","useCallback","MDCListFoundation","matches","useFoundation","useListFoundation","props","listElements","el","slice","call","querySelectorAll","cssClasses","LIST_ITEM_CLASS","_a","api","rootEl","foundation","adapter","adapter_","ref","focusRoot","focus","getClasses","addClassToElementIndex","addClassForElementIndex","removeClassFromElementAtIndex","removeClassForElementIndex","setAttributeForElementIndex","getListItemCount","focusItemAtIndex","elements","emit","length","getFocusedElementIndex","indexOf","document","activeElement","listItemAtIndexHasClass","index","className","element","classList","contains","attr","value","setAttribute","String","add","remove","setTabIndexForListItemChildren","listItemIndex","tabIndexValue","listItemChildren","strings","CHILD_ELEMENTS_TO_TOGGLE_TABINDEX","forEach","ele","hasCheckboxAtIndex","listItem","querySelector","CHECKBOX_SELECTOR","hasRadioAtIndex","RADIO_SELECTOR","isCheckboxCheckedAtIndex","toggleEl","checked","setCheckedCheckboxOrRadioAtIndex","isChecked","CHECKBOX_RADIO_SELECTOR","event_1","createEvent","initEvent","dispatchEvent","notifyAction","isFocusInsideList","isRootFocused","getListItemIndex","evt","eventTarget","target","ROOT","parentElement","handleClick","onClick","toggleCheckbox","handleKeydown","onKeyDown","Element","handleFocusIn","onFocus","handleFocusOut","onBlur","setProp","layout","setWrapFocus","wrapFocus","undefined","setVerticalOrientation","vertical"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { useEffect, useCallback } from 'react';\nimport { MDCListFoundation } from '@material/list';\nimport { matches } from '@rmwc/base';\nimport { useFoundation } from '@rmwc/base';\nexport var useListFoundation = function (props) {\n    var listElements = useCallback(function (el) {\n        if (el) {\n            return [].slice.call(el.querySelectorAll(\".\" + MDCListFoundation.cssClasses.LIST_ITEM_CLASS));\n        }\n        return [];\n    }, []);\n    var _a = useFoundation({\n        props: props,\n        api: function (_a) {\n            var rootEl = _a.rootEl, foundation = _a.foundation;\n            var adapter = foundation.adapter_;\n            return {\n                listElements: function () { return listElements(rootEl.ref); },\n                focusRoot: function () { return rootEl.ref && rootEl.ref.focus(); },\n                getClasses: function () { return MDCListFoundation.cssClasses.LIST_ITEM_CLASS; },\n                addClassToElementIndex: adapter.addClassForElementIndex,\n                removeClassFromElementAtIndex: adapter.removeClassForElementIndex,\n                setAttributeForElementIndex: adapter.setAttributeForElementIndex,\n                getListItemCount: adapter.getListItemCount,\n                focusItemAtIndex: adapter.focusItemAtIndex\n            };\n        },\n        elements: { rootEl: true },\n        foundation: function (_a) {\n            var rootEl = _a.rootEl, emit = _a.emit;\n            return new MDCListFoundation({\n                getListItemCount: function () { return listElements(rootEl.ref).length; },\n                getFocusedElementIndex: function () {\n                    return listElements(rootEl.ref).indexOf(document.activeElement);\n                },\n                listItemAtIndexHasClass: function (index, className) {\n                    var element = listElements(rootEl.ref)[index];\n                    return !!(element === null || element === void 0 ? void 0 : element.classList.contains(className));\n                },\n                setAttributeForElementIndex: function (index, attr, value) {\n                    // This value is getting set and never getting set back\n                    // This is causing list items to be un-tabbable\n                    // if (attr === 'tabindex' && value === -1) {\n                    //   return;\n                    // }\n                    if (attr === 'tabindex') {\n                        attr = 'tabIndex';\n                    }\n                    var element = listElements(rootEl.ref)[index];\n                    if (element) {\n                        element.setAttribute(attr, String(value));\n                    }\n                },\n                addClassForElementIndex: function (index, className) {\n                    var element = listElements(rootEl.ref)[index];\n                    if (element) {\n                        element.classList.add(className);\n                    }\n                },\n                removeClassForElementIndex: function (index, className) {\n                    var element = listElements(rootEl.ref)[index];\n                    if (element) {\n                        element.classList.remove(className);\n                    }\n                },\n                focusItemAtIndex: function (index) {\n                    var element = listElements(rootEl.ref)[index];\n                    if (element) {\n                        element.focus();\n                    }\n                },\n                setTabIndexForListItemChildren: function (listItemIndex, tabIndexValue) {\n                    var element = listElements(rootEl.ref)[listItemIndex];\n                    var listItemChildren = [].slice.call(element.querySelectorAll(MDCListFoundation.strings.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX));\n                    listItemChildren.forEach(function (ele) {\n                        return ele.setAttribute('tabindex', String(tabIndexValue));\n                    });\n                },\n                hasCheckboxAtIndex: function (index) {\n                    var listItem = listElements(rootEl.ref)[index];\n                    return !!listItem.querySelector(MDCListFoundation.strings.CHECKBOX_SELECTOR);\n                },\n                hasRadioAtIndex: function (index) {\n                    var listItem = listElements(rootEl.ref)[index];\n                    return !!listItem.querySelector(MDCListFoundation.strings.RADIO_SELECTOR);\n                },\n                isCheckboxCheckedAtIndex: function (index) {\n                    var listItem = listElements(rootEl.ref)[index];\n                    var toggleEl = listItem.querySelector(MDCListFoundation.strings.CHECKBOX_SELECTOR);\n                    return toggleEl ? toggleEl.checked : false;\n                },\n                setCheckedCheckboxOrRadioAtIndex: function (index, isChecked) {\n                    var listItem = listElements(rootEl.ref)[index];\n                    var toggleEl = listItem.querySelector(MDCListFoundation.strings.CHECKBOX_RADIO_SELECTOR);\n                    if (toggleEl) {\n                        toggleEl.checked = isChecked;\n                        var event_1 = document.createEvent('Event');\n                        event_1.initEvent('change', true, true);\n                        toggleEl.dispatchEvent(event_1);\n                    }\n                },\n                notifyAction: function (index) {\n                    emit('onAction', { index: index });\n                },\n                isFocusInsideList: function () {\n                    var _a;\n                    return !!((_a = rootEl.ref) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement));\n                },\n                isRootFocused: function () { return document.activeElement === rootEl.ref; }\n            });\n        }\n    }), foundation = _a.foundation, elements = __rest(_a, [\"foundation\"]);\n    var rootEl = elements.rootEl;\n    /**\n     * Used to figure out which list item this event is targetting. Or returns -1 if\n     * there is no list item\n     */\n    var getListItemIndex = useCallback(function (evt) {\n        var eventTarget = evt.target;\n        var index = -1;\n        // Find the first ancestor that is a list item or the list.\n        while (eventTarget &&\n            !eventTarget.classList.contains(MDCListFoundation.cssClasses.LIST_ITEM_CLASS) &&\n            !eventTarget.classList.contains(MDCListFoundation.cssClasses.ROOT)) {\n            eventTarget = eventTarget.parentElement;\n        }\n        // Get the index of the element if it is a list item.\n        if (eventTarget &&\n            eventTarget.classList.contains(MDCListFoundation.cssClasses.LIST_ITEM_CLASS)) {\n            index = listElements(rootEl.ref).indexOf(eventTarget);\n        }\n        return index;\n    }, [listElements, rootEl.ref]);\n    var handleClick = useCallback(function (evt) {\n        var _a;\n        (_a = props.onClick) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n        var index = getListItemIndex(evt);\n        // Toggle the checkbox only if it's not the target of the event, or the checkbox will have 2 change events.\n        var toggleCheckbox = !matches(evt.target, MDCListFoundation.strings.CHECKBOX_RADIO_SELECTOR);\n        foundation.handleClick(index, toggleCheckbox);\n    }, [getListItemIndex, foundation, props.onClick]);\n    var handleKeydown = useCallback(function (evt) {\n        var _a;\n        (_a = props.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n        var index = getListItemIndex(evt);\n        if (index >= 0) {\n            foundation.handleKeydown(evt, evt.target instanceof Element &&\n                evt.target.classList.contains(MDCListFoundation.cssClasses.LIST_ITEM_CLASS), index);\n        }\n    }, [getListItemIndex, foundation, props.onKeyDown]);\n    var handleFocusIn = useCallback(function (evt) {\n        var _a;\n        (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n        foundation.handleFocusIn(evt, getListItemIndex(evt));\n    }, [getListItemIndex, foundation, props.onFocus]);\n    var handleFocusOut = useCallback(function (evt) {\n        var _a;\n        (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, evt);\n        foundation.handleFocusOut(evt, getListItemIndex(evt));\n    }, [getListItemIndex, foundation, props.onBlur]);\n    rootEl.setProp('onClick', handleClick, true);\n    rootEl.setProp('onKeyDown', handleKeydown, true);\n    rootEl.setProp('onFocus', handleFocusIn, true);\n    rootEl.setProp('onBlur', handleFocusOut, true);\n    // layout on mount\n    useEffect(function () {\n        foundation.layout();\n    }, [foundation]);\n    useEffect(function () {\n        foundation.setWrapFocus(props.wrapFocus || props.wrapFocus === undefined);\n    }, [foundation, props.wrapFocus]);\n    useEffect(function () {\n        foundation.setVerticalOrientation(props.vertical || props.vertical === undefined);\n    }, [foundation, props.vertical]);\n    return __assign({}, elements);\n};\n"]},"metadata":{},"sourceType":"module"}